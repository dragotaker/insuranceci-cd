# Система управления страховой компанией

## Описание
Веб-приложение для управления страховой компанией, включающее функционал для работы с клиентами, полисами, претензиями и статистикой.

## Требования
- Python 3.8+
- PostgreSQL 12+
- Bottle (Python web framework)
- psycopg2 (PostgreSQL adapter)

## Установка

1. Клонируйте репозиторий:
```bash
git clone [url-репозитория]
cd [директория-проекта]
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте базу данных PostgreSQL:
```sql
CREATE DATABASE insurance_db;
```

4. Импортируйте схему базы данных:
```bash
psql -d insurance_db -f database/insurance_db.sql
```

5. Настройте подключение к базе данных в `config.py`:
```python
DB_CONFIG = {
    'dbname': 'insurance_db',
    'user': 'your_username',
    'password': 'your_password',
    'host': 'localhost',
    'port': '5432'
}
```

## Запуск приложения
```bash
python app.py
```
Приложение будет доступно по адресу: http://localhost:8080

## Структура проекта

### Основные компоненты
- `app.py` - точка входа в приложение
- `routes.py` - маршруты и обработчики запросов
- `database.py` - функции для работы с базой данных
- `config.py` - конфигурация приложения
- `utils.py` - вспомогательные функции
- `reports.py` - SQL-запросы для отчетов

### Шаблоны
- `templates/layout.tpl` - основной шаблон
- `templates/table.tpl` - шаблон для отображения таблиц
- `templates/add.tpl` - форма добавления записей
- `templates/edit.tpl` - форма редактирования
- `templates/reports.tpl` - страница статистики

### Статические файлы
- `static/style.css` - стили приложения

## Функциональность

### Управление данными
- CRUD операции для всех сущностей
- Поиск по таблицам
- Валидация данных
- Обработка ошибок

### Безопасность
- Хеширование паролей
- Ролевой доступ
- Защита от SQL-инъекций

### Отчеты
- Общая статистика
- Топ категорий страхования
- Динамика по месяцам
- Финансовые показатели

## База данных

### Основные таблицы
- `clients` - клиенты
- `employees` - сотрудники
- `insurance_policies` - страховые полисы
- `insured_events` - страховые случаи
- `insurance_claims` - претензии
- `payments` - платежи
- `users` - пользователи системы

### Триггеры
- Проверка удаления связанных записей
- Валидация данных
- Автоматическое обновление статистики

## Разработка

### Добавление новых функций
1. Создайте новый маршрут в `routes.py`
2. Добавьте необходимые SQL-запросы
3. Создайте шаблон в `templates/`
4. Обновите навигацию в `layout.tpl`

### Тестирование
- Проверка всех CRUD операций
- Тестирование поиска
- Валидация форм
- Проверка отчетов

## Поддержка
При возникновении проблем:
1. Проверьте логи приложения
2. Убедитесь в корректности подключения к БД
3. Проверьте права доступа
4. Обратитесь к документации 